# telegram-prompt-image-ai-agent
Telegram-–±–æ—Ç –Ω–∞ n8n –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ Prompt-–Ü–Ω–∂–∏–Ω—ñ—Ä–∏–Ω–≥—É, —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—ó –≥–æ–ª–æ—Å—É —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Google Gemini —Ç–∞ OpenAI.

# ü§ñ Telegram Prompt & Image AI Agent (n8n Workflow)

## üåü –û–≥–ª—è–¥
–¶–µ–π n8n –≤–æ—Ä–∫—Ñ–ª–æ—É —Å—Ç–≤–æ—Ä—é—î —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π Telegram-–±–æ—Ç, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–µ—Ä–µ–¥–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –í–µ–ª–∏–∫–∏—Ö –ú–æ–≤–Ω–∏—Ö –ú–æ–¥–µ–ª–µ–π (LLMs) —Ç–∞ –ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–∏—Ö AI –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–≤–æ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å:
1.  **–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π Prompt-–Ü–Ω–∂–∏–Ω—ñ—Ä–∏–Ω–≥:** –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Å–∏—Ä—ñ, –Ω–µ—á—ñ—Ç–∫—ñ –∑–∞–ø–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—Ç–µ–∫—Å—Ç –∞–±–æ –≥–æ–ª–æ—Å) –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ, –≤–∏—Å–æ–∫–æ—è–∫—ñ—Å–Ω—ñ –ø—Ä–æ–º—Ç–∏ –¥–ª—è LLMs (–Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ–π –º–æ–≤—ñ).
2.  **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ó–æ–±—Ä–∞–∂–µ–Ω—å:** –ù–∞ –æ—Å–Ω–æ–≤—ñ –∑–∞–ø–∏—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≥–µ–Ω–µ—Ä—É—î –¥–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π, –∞–Ω–≥–ª–æ–º–æ–≤–Ω–∏–π –ø—Ä–æ–º—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –∞ –ø–æ—Ç—ñ–º —Å—Ç–≤–æ—Ä—é—î —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—î –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—é (–∫–∞—Ä—Ç–∏–Ω–∫—É) —É —á–∞—Ç.

–í–æ—Ä–∫—Ñ–ª–æ—É —Ç–∞–∫–æ–∂ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≥–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è —á–µ—Ä–µ–∑ OpenAI) —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î –ª–æ–≥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É Google Sheets.

## ‚ú® –ö–ª—é—á–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

* **Telegram Trigger:** –ó–∞–ø—É—Å–∫ –≤–æ—Ä–∫—Ñ–ª–æ—É –ø–æ –≤—Ö—ñ–¥–Ω–æ–º—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –∞–±–æ –≥–æ–ª–æ—Å–æ–≤–æ–º—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—é.
* **–ì–æ–ª–æ—Å–æ–≤–∏–π –≤–≤—ñ–¥:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è –≥–æ–ª–æ—Å–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É —Ç–µ–∫—Å—Ç (OpenAI Transcribe).
* **AI Agent (Google Gemini):** –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π –∞–≥–µ–Ω—Ç, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î:
    * –ê–Ω–∞–ª—ñ–∑ –∑–∞–ø–∏—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
    * –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ–≥–æ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ –ø—Ä–æ–º—Ç—É.
    * –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–≥–ª–æ–º–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–º—Ç—É –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON.
* **–ü–∞—Ä—Å–∏–Ω–≥ JSON:** –ö–æ–¥–æ–≤–∏–π –±–ª–æ–∫ JavaScript –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –≤–∏–ª—É—á–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç–æ–≤–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–∞ –ø—Ä–æ–º—Ç—É –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ AI.
* **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ê—É–¥—ñ–æ (TTS):** –ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç–æ–≤–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –∞—É–¥—ñ–æ—Ñ–∞–π–ª (OpenAI TTS) —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –π–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É.
* **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ó–æ–±—Ä–∞–∂–µ–Ω—å:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–∫—Ä–µ–º–æ–≥–æ AI Agent (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Google Gemini Chat Model 1 / Pictures) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–≥–ª–æ–º–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–º—Ç—É.
* **–õ–æ–≥—É–≤–∞–Ω–Ω—è:** –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ —ó—Ö –∑–∞–ø–∏—Ç—ñ–≤ —É Google Sheets.
* **–ü–∞–º'—è—Ç—å (Simple Memory):** –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –¥—ñ–∞–ª–æ–≥—É –¥–ª—è –±—ñ–ª—å—à –∑–º—ñ—Å—Ç–æ–≤–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π (Buffer Window).

## üõ†Ô∏è –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ç–∞ API

–î–ª—è —Ä–æ–±–æ—Ç–∏ –≤–æ—Ä–∫—Ñ–ª–æ—É –ø–æ—Ç—Ä—ñ–±–Ω—ñ –∫–ª—é—á—ñ –¥–æ—Å—Ç—É–ø—É (Credentials) –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤:

| –°–µ—Ä–≤—ñ—Å | Node(–∏) | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
| :--- | :--- | :--- |
| **Telegram API** | `Telegram Trigger`, `Send a text message`, `Get a file`, `Send a photo message`, `Send an audio file` | –í—Ö—ñ–¥/–í–∏—Ö—ñ–¥ –¥–∞–Ω–∏—Ö |
| **Google Gemini API** | `Google Gemini Chat Model` (AI Agent), `Google Gemini Chat Model1` (Pictures) | –û–±—Ä–æ–±–∫–∞ –ø—Ä–æ–º—Ç—ñ–≤ —Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å |
| **OpenAI API** | `Transcribe a recording`, `Generate audio` | –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è –≥–æ–ª–æ—Å—É —Ç–∞ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∞—É–¥—ñ–æ (TTS) |
| **Google Sheets API** | `Append row in sheet` | –õ–æ–≥—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤/–∑–∞–ø–∏—Ç—ñ–≤ |

## üöÄ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (Setup)

### 1. –Ü–º–ø–æ—Ä—Ç –í–æ—Ä–∫—Ñ–ª–æ—É

1.  –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª `telegram_ai_agent.json`.
2.  –í n8n –ø–µ—Ä–µ–π–¥—ñ—Ç—å —É —Ä–æ–∑–¥—ñ–ª **Workflows** —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Import from JSON**.
3.  –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª –≤–æ—Ä–∫—Ñ–ª–æ—É.

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Credential

–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ Credential –≤ n8n, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –≤–∞—à—ñ –∫–ª—é—á—ñ API. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –ø—ñ–¥–∫–ª—é—á–∏–ª–∏ —ó—Ö –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –≤—É–∑–ª—ñ–≤ —É –≤–æ—Ä–∫—Ñ–ª–æ—É:

* **Telegram API:** –¢–æ–∫–µ–Ω –≤–∞—à–æ–≥–æ –±–æ—Ç–∞ (@BotFather).
* **Google Gemini API:** –í–∞—à –∫–ª—é—á API.
* **OpenAI API:** –í–∞—à –∫–ª—é—á API.
* **Google Sheets OAuth2 API:** –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ Google Sheets –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è.

### 3. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –í—É–∑–ª—ñ–≤

* **Telegram Trigger:** –í–µ–±—Ö—É–∫ –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –∞–∫—Ç–∏–≤–Ω–∏–π —ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –Ω–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.
* **Append row in sheet:** –í–∫–∞–∂—ñ—Ç—å **Document ID** —Ç–∞ **Sheet Name** –≤–∞—à–æ—ó Google –¢–∞–±–ª–∏—Ü—ñ –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è (–Ω–∞–∑–≤–∞ –≤–∞—à–æ—ó —Ç–∞–±–ª–∏—Ü—ñ - `Telegram Bot Users Log`, –ª–∏—Å—Ç - `–õ–æ–≥–∏`).
* **AI Agent (23bc8706...):** –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `promptType` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —è–∫ `define`, —ñ –≤ `text` –º—ñ—Å—Ç–∏—Ç—å—Å—è –ø–æ–≤–Ω–∏–π —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º—Ç (—è–∫ —É –Ω–∞–¥–∞–Ω–æ–º—É JSON).
* **Send a text message / Send a photo message / Send an audio file:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `chatId` –¥–∏–Ω–∞–º—ñ—á–Ω–æ –æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è –∑ `Telegram Trigger` (`={{ $('Telegram Trigger').item.json.message.chat.id }}`).

### 4. –ê–∫—Ç–∏–≤–∞—Ü—ñ—è

–£–≤—ñ–º–∫–Ω—ñ—Ç—å –≤–æ—Ä–∫—Ñ–ª–æ—É (–ø–µ—Ä–µ–≤–µ–¥—ñ—Ç—å –ø–µ—Ä–µ–º–∏–∫–∞—á **Active** —É –ø–æ–∑–∏—Ü—ñ—é **ON**). –ë–æ—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏!

## üí° –õ–æ–≥—ñ–∫–∞ –í–æ—Ä–∫—Ñ–ª–æ—É

1.  **Start:** `Telegram Trigger` –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
2.  **Logic Branching:** –í—É–∑–æ–ª `If` –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —î —Ü–µ –≥–æ–ª–æ—Å–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
    * **True (–ì–æ–ª–æ—Å):** `Get a file` -> `Transcribe a recording` (OpenAI). –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –∑–∞–ø–∏—Ç.
    * **False (–¢–µ–∫—Å—Ç):** –¢–µ–∫—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ.
3.  **Core AI Processing:** `AI Agent` –æ—Ç—Ä–∏–º—É—î –∑–∞–ø–∏—Ç —Ç–∞ `Simple Memory` (–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É). –í—ñ–Ω –ø–æ–≤–µ—Ä—Ç–∞—î JSON —ñ–∑ `text_response` (–æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –ø—Ä–æ–º—Ç) —Ç–∞ `image_prompt` (–¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è).
4.  **Data Split:** `Code in JavaScript` –ø–∞—Ä—Å–∏—Ç—å JSON-–≤—ñ–¥–ø–æ–≤—ñ–¥—å, —Å—Ç–≤–æ—Ä—é—é—á–∏ –¥–≤–∞ –æ–∫—Ä–µ–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏: –æ–¥–∏–Ω –¥–ª—è —Ç–µ–∫—Å—Ç—É/–∞—É–¥—ñ–æ, —ñ–Ω—à–∏–π –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.
5.  **Text & Audio Pipeline:**
    * `Filter` (Text Response): –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç–µ–∫—Å—Ç—É.
    * `Send a text message`: –ù–∞–¥—Å–∏–ª–∞—î –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –ø—Ä–æ–º—Ç.
    * `Generate audio` (OpenAI TTS) -> `Send an audio file`: –ù–∞–¥—Å–∏–ª–∞—î –∞—É–¥—ñ–æ-–≤–µ—Ä—Å—ñ—é –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.
6.  **Image Pipeline:**
    * `Filter1` (Image Prompt): –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø—Ä–æ–º—Ç—É –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.
    * `Pictures` (AI Agent): –ì–µ–Ω–µ—Ä—É—î URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–≥–ª–æ–º–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–º—Ç—É.
    * `–ó–±–µ—Ä—ñ–≥–∞—î_–∫–∞—Ä—Ç–∏–Ω–∫—É` (HTTP Request): –û—Ç—Ä–∏–º—É—î –±—ñ–Ω–∞—Ä–Ω—ñ –¥–∞–Ω—ñ –∫–∞—Ä—Ç–∏–Ω–∫–∏.
    * `Send a photo message`: –ù–∞–¥—Å–∏–ª–∞—î –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è.
7.  **Logging:** `Append row in sheet` –∑–∞–ø–∏—Å—É—î –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –π–æ–≥–æ –∑–∞–ø–∏—Ç —É Google Sheets (–ø—Ä–∞—Ü—é—î –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ).
